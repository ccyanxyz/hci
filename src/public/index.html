<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Demo</title>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="http://d3js.org/topojson.v1.min.js"></script>
		<script src="http://d3js.org/queue.v1.min.js"></script>
		<script src="https://d3js.org/d3-color.v1.min.js"></script>
		<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
		<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
		<style>
			body{
				overflow: hidden;
			}

			.land {
				fill: #1e90ff;
				stroke: #FFF;
				stroke-width: 0.7px;
			}

			.land:hover {
				fill:#33CC33;
				stroke-width: 1px;
			}

			.grid_path {
				stroke: gray;
				stroke-width: 1;
				fill: none;
				opacity: 1;
			}

			.focused {
				fill: #33CC33;
			}

			.dataTip {
				position: absolute;
				display: none;
				pointer-events: none;
				background: #fff;
				padding: 5px;
				text-align: left;
				border: solid #ccc 1px;
				color: #666;
				font-size: 14px;
				font-family: sans-serif;
			}
			.axis path,
			.axis line{
				fill: none;
				stroke: black;
				shape-rendering: crispEdges;
			}	
			.axis text {
				font-family: sans-serif;
				font-size: 11px;
			}

			.styled-select {
				position: absolute;
				top: 20px;
				left: 580px;
				height: 29px;
				overflow: hidden;
				width: 240px;
			}

			.styled-select select {
				background: transparent;
				border: none;
				font-size: 14px;
				height: 29px;
				padding: 5px;
				width: 268px;
			}

			.semi-square {
				-webkit-border-radius: 5px;
				-moz-border-radius: 5px;
				border-radius: 5px;
			}

			.blue    { background-color: #1e90ff; }
			.blue select    { color: #fff; }
		</style>
	</head>
	<body>
		<script src="./main.js"></script>
		<script src="/js/gest.js"></script>
		<script>
			document.addEventListener('gest', function(gesture) {
				console.log(gesture);
				let ratio = 10;
				let change = Math.round(gesture.change * ratio);
				let globe = svg.selectAll("path.land")
				let rotate = projection.rotate()
				console.log(rotate);
				if (gesture.left) {
					console.log("left")
					projection.rotate([rotate[0] + change, rotate[1], rotate[2]]);
				} else if (gesture.right) {
					console.log("right")
					projection.rotate([rotate[0] + change, rotate[1], rotate[2]]);
				} else if (gesture.up) {
					console.log("up")
					projection.rotate([rotate[0], rotate[1] + change, rotate[2]]);
				} else if (gesture.down) {
					console.log("down")
					projection.rotate([rotate[0], rotate[1] + change, rotate[2]]);
				}
				svg.selectAll(".grid_path").attr("d", path);
				svg.selectAll("path.land").attr("d", path);
				svg.selectAll(".focused").classed("focused", focused = false);
			}, false)

			gest.start()
		</script>
	</body>
</html>

